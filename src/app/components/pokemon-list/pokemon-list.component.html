<div class="pokemon-container">
  <!-- Affichage du chargement -->
  @if (loading) {
    <div class="loading-container">
      <div class="spinner"></div>
      <span class="loading-text">Chargement des Pokémon...</span>
    </div>
  }

  <!-- Affichage des erreurs -->
  @if (error && !loading) {
    <div class="error-container">
      <div class="error-icon">⚠️</div>
      <p>{{ error }}</p>
    </div>
  }

  <!-- Grille des Pokémon -->
  @if (!loading && pokemons.length > 0) {
    <div class="pokemon-grid">
      @for (pokemon of pokemons; track pokemon.id) {
        <div class="pokemon-card" (click)="selectPokemon(pokemon)">
          <div class="pokemon-image">
            <img
              [src]="pokemon.sprites?.other?.['official-artwork']?.front_default || pokemon.sprites?.front_default"
              [alt]="pokemon.name"
              loading="lazy"
            />
          </div>
          <div class="pokemon-info">
            <h3 class="pokemon-name">{{ pokemon.name }}</h3>
            <span class="pokemon-id">#{{ pokemon.id | number: '3.0-0' }}</span>
            <div class="pokemon-types">
              @for (type of pokemon.types; track type.type.name) {
                <span class="type-badge">{{ type.type.name }}</span>
              }
            </div>
          </div>
        </div>
      }
    </div>
  }

  <!-- Pagination -->
  @if (pokemons.length > 0 && !loading) {
    <div class="pagination-container">
      <nav aria-label="Navigation des pages">
        <ul class="pagination">
          <li class="page-item">
            <button class="page-link" (click)="previousPage()" [disabled]="!canPreviousPage()">
              ← Précédent
            </button>
          </li>

          @for (page of pages; track page) {
            <li class="page-item" [class.active]="page === currentPage">
              <button class="page-link" (click)="goToPage(page)">
                {{ page }}
              </button>
            </li>
          }

          <li class="page-item">
            <button class="page-link" (click)="nextPage()" [disabled]="!canNextPage()">
              Suivant →
            </button>
          </li>
        </ul>
      </nav>
    </div>
  }
</div>
